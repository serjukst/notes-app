(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){e.exports=a(34)},27:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),s=(a(27),a(9)),o=a(2),u=a(1),i=a.n(u),m=a(3),d=a(13),p=a(12),E=a(4),v=function(){var e=Object(n.useState)(!1),t=Object(E.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(E.a)(c,2),s=l[0],o=l[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,c,l,s,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:"GET",n=u.length>2&&void 0!==u[2]?u[2]:null,c=u.length>3&&void 0!==u[3]?u[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),c["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:c});case 8:return l=e.sent,e.next=11,l.json();case 11:if(s=e.sent,l.ok){e.next=14;break}throw new Error(s.message||"Something went wrong");case 14:return r(!1),e.abrupt("return",s);case 18:throw e.prev=18,e.t0=e.catch(4),console.log("CatchError",e.t0.message),r(!1),o(e.t0.message),e.t0;case 24:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:s,clearError:Object(n.useCallback)((function(){return o(null)}),[])}},b=function(){return Object(n.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[])};var f=Object(n.createContext)({token:null,userId:null,login:void 0,logout:void 0,isAuthenticated:!1});function h(){var e=Object(n.useContext)(f),t=b(),a=v(),c=a.loading,l=a.error,s=a.request,o=a.clearError,u=Object(n.useState)({username:"",password:""}),h=Object(E.a)(u,2),w=h[0],g=h[1];Object(n.useEffect)((function(){t(l),o()}),[l,t,o]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var O=function(e){g(Object(p.a)(Object(p.a)({},w),{},Object(d.a)({},e.target.name,e.target.value)))},j=function(){var e=Object(m.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("/api/auth/register","POST",Object(p.a)({},w));case 3:a=e.sent,t(a.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/auth/login","POST",Object(p.a)({},w));case 3:a=t.sent,e.login(a.jwt_token,a.userId),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 offset-s3"},r.a.createElement("h2",{className:"center"},"Notes app"),r.a.createElement("div",{className:"card teal darken-3"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},"Authorization"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Enter username",id:"username",type:"text",name:"username",value:w.username,onChange:O}),r.a.createElement("label",{htmlFor:"username"},"Username")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Enter password",id:"password",type:"password",name:"password",value:w.password,onChange:O}),r.a.createElement("label",{htmlFor:"username"},"Password")))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"btn teal",style:{marginRight:10},onClick:k,disabled:c},"Login"),r.a.createElement("button",{className:"btn grey lighten-1 black-text",onClick:j,disabled:c},"Registration")))))}function w(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"2rem"}},r.a.createElement("div",{className:"preloader-wrapper active"},r.a.createElement("div",{className:"spinner-layer spinner-red-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}var g=function(e){var t=Object(n.useState)(e),a=Object(E.a)(t,2),r=a[0],c=a[1];return{value:r,setValue:c,reset:function(){return c("")},bind:{value:r,onChange:function(e){c(e.target.value)}}}};function O(e){var t=e.note,a=Object(n.useState)(t.completed),c=Object(E.a)(a,2),l=c[0],s=c[1],u=g(t.text),d=u.value,p=u.bind,b=v().request,h=Object(n.useContext)(f).token,w=Object(o.g)(),O=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("/api/notes/".concat(t._id),"PATCH",null,{Authorization:"Bearer ".concat(h)});case 3:s((function(e){return!e})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("/api/notes/".concat(t._id),"DELETE",null,{Authorization:"Bearer ".concat(h)});case 3:w.push("/notes"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("/api/notes/".concat(t._id),"PUT",{text:d},{Authorization:"Bearer ".concat(h)});case 3:w.push("/notes"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row",id:t._id},r.a.createElement("h5",{className:"center"},"Edit note:"),r.a.createElement("div",{className:"col s8 offset-s2 flex space-between"},r.a.createElement("div",{className:"flex flex-grow m-r-1"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:O,checked:l}),r.a.createElement("span",null)),r.a.createElement("input",Object.assign({type:"text",disabled:l},p))),r.a.createElement("div",null,r.a.createElement("button",{onClick:k,className:"waves-effect waves-teal btn m-r-1"},r.a.createElement("i",{className:"material-icons"},"save")),r.a.createElement("button",{onClick:j,className:"waves-effect waves-teal btn"},r.a.createElement("i",{className:"material-icons"},"delete")))))}function j(){var e=Object(n.useContext)(f).token,t=v(),a=t.request,c=t.loading,l=Object(n.useState)(null),s=Object(E.a)(l,2),u=s[0],d=s[1],p=Object(o.h)().id,b=Object(n.useCallback)(Object(m.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("/api/notes/".concat(p),"GET",null,{Authorization:"Bearer ".concat(e)});case 3:n=t.sent,d(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e,p,a]);return Object(n.useEffect)((function(){b()}),[b]),c?r.a.createElement(w,null):r.a.createElement(r.a.Fragment,null,!c&&u&&r.a.createElement(O,{note:u}))}function k(e){var t=e.notes;return 0===t.length?r.a.createElement("h5",{className:"center"},"You haven`t any notes"):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement("table",{className:"centered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Completed"),r.a.createElement("th",null,"Note"),r.a.createElement("th",null,"Options"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:e.completed,readOnly:!0}),r.a.createElement("span",null))),r.a.createElement("td",null,e.text),r.a.createElement("td",null,r.a.createElement(s.b,{to:"/notes/".concat(e._id),className:"waves-effect waves-light btn"},r.a.createElement("i",{className:"material-icons"},"edit"))))}))))))}function x(){var e=Object(n.useContext)(f).token,t=v(),a=t.request,c=t.loading,l=g(""),s=l.value,u=l.bind,d=l.reset,p=Object(o.g)();Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var E=function(){var t=Object(m.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==n.key){t.next=10;break}return t.prev=1,t.next=4,a("/api/notes","POST",{text:s},{Authorization:"Bearer ".concat(e)});case 4:d(),p.push("/"),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",Object.assign({placeholder:"Note",id:"note",type:"text"},u,{onKeyPress:E,disabled:c})),r.a.createElement("label",{htmlFor:"note"},"Add note"))))}function N(){var e=Object(n.useState)([]),t=Object(E.a)(e,2),a=t[0],c=t[1],l=v(),s=l.loading,o=l.request,u=Object(n.useContext)(f).token,d=Object(n.useCallback)(Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/api/notes","GET",null,{Authorization:"Bearer ".concat(u)});case 3:t=e.sent,c(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[u,o]);return Object(n.useEffect)((function(){d()}),[d]),s?r.a.createElement(w,null):r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null)," ",r.a.createElement(k,{notes:a})))}function y(e){var t=e.user,a=v(),c=a.request,l=a.loading,s=b(),o=Object(n.useContext)(f),u=o.token,d=o.logout,p=g(""),E=p.value,h=p.bind,w=p.reset,O=g(""),j=O.value,k=O.bind,x=O.reset,N=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/users/me","DELETE",null,{Authorization:"Bearer ".concat(u)});case 3:s("User deleted"),d(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/users/me","PATCH",{oldPassword:E,newPassword:j},{Authorization:"Bearer ".concat(u)});case 3:w(),x(),s("Password changed"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"centered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"User Name"),r.a.createElement("th",null,"Member since"),r.a.createElement("th",null,"Options"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t.username),r.a.createElement("td",null,new Date(t.createdDate).toLocaleString()),r.a.createElement("td",null,r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:N,disabled:l},"Delete profile"))))),r.a.createElement("div",{className:"bordered"},r.a.createElement("h6",null,"You can change password"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",Object.assign({id:"oldPassword",type:"password",className:"validate"},h)),r.a.createElement("label",{htmlFor:"oldPassword"},"Old password"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",Object.assign({id:"newPassword",type:"password",className:"validate"},k)),r.a.createElement("label",{htmlFor:"newPassword"},"New password")),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:y,disabled:l},"Change password")))))}function C(){var e=Object(n.useContext)(f).token,t=v(),a=t.request,c=t.loading,l=Object(n.useState)(null),s=Object(E.a)(l,2),o=s[0],u=s[1],d=Object(n.useCallback)(Object(m.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("api/users/me","GET",null,{Authorization:"Bearer ".concat(e)});case 3:n=t.sent,u(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e,a]);return Object(n.useEffect)((function(){d()}),[d]),c?r.a.createElement(w,null):r.a.createElement(r.a.Fragment,null,!c&&o&&r.a.createElement(y,{user:o}))}function S(){var e=Object(o.g)(),t=Object(n.useContext)(f);return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper teal",style:{padding:"0 2rem"}},r.a.createElement("span",{className:"brand-logo left"},"Notes app"),r.a.createElement("ul",{id:"nav-mobile",className:"right"},r.a.createElement("li",null,r.a.createElement(s.b,{to:"/notes"},"Notes")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/user"},"Profile")),r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:function(a){a.preventDefault(),t.logout(),e.push("/")}},"Logout")))))}a(33);var P=function(){var e=function(){var e=Object(n.useState)(null),t=Object(E.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(E.a)(c,2),s=l[0],o=l[1],u=Object(n.useState)(null),i=Object(E.a)(u,2),m=i[0],d=i[1],p=Object(n.useCallback)((function(e,t){r(e),d(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),v=Object(n.useCallback)((function(){r(null),d(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&p(e.token,e.userId),o(!0)}),[p]),{login:p,logout:v,token:a,userId:m,ready:s}}(),t=e.token,a=e.userId,c=e.login,l=e.logout,u=e.ready,i=!!t,m=function(e){return e?r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/notes",exact:!0},r.a.createElement(N,null)),r.a.createElement(o.b,{path:"/notes/:id"},r.a.createElement(j,null)),r.a.createElement(o.b,{path:"/user"},r.a.createElement(C,null)),r.a.createElement(o.a,{to:"/notes"})):r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0},r.a.createElement(h,null)),r.a.createElement(o.a,{to:"/"}))}(i);return u?r.a.createElement(f.Provider,{value:{token:t,userId:a,login:c,logout:l,isAuthenticated:i}},r.a.createElement(s.a,null,i&&r.a.createElement(S,null),r.a.createElement("div",{className:"container"},m))):r.a.createElement(w,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.6ee9398d.chunk.js.map